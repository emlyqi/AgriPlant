var day = 1;
var currCoins = 1000;
var goalCoins = 1000;
var triviaCoins = 0;
var dailySpend = 0;
var dailyEarn = 0;
var numDeadCrops = 0;
var daysLeft = 14-day;
var plantsPlanted = [0,0,0,0,0,0,0];
var selection = false;
var toolSelectionImg;
// var selected = [0,0,0,0,0,0,0];

const trivQ1 = ["Pesticides are often used to control pests in agriculture. What are some risks of pesticides on the human body?", "Affect the nervous system", "Affect the hormone or endocrine system", "All of the above", 2]
const trivQ2 = ["What pesticide is most toxic to wildlife?", "Chlorpyrifos", "Malathion", "Glyphosate", 1]
const trivQ3 = ["Malathion, known to be the most toxic pesticide to wildlife, is likely to cause harm to what percent of the 1,782 animals and plants under the endangered species act?", "97%", "84%", "68%", 0]
const trivQ4 = ["Between January 2011 and December 2013, what domestic animal was the most involved in poisoning by pesticides?", "Cats", "Horses", "Dogs", 2]
const trivQ5 = ["Carbofuran, one of history’s deadliest pesticides, only needs what quantity to kill a 400-pound bear?", "⅛ tsp", "¼ tsp", "½ tsp", 1]
const trivQ6 = ["It is estimated that roughly _____ birds are killed annually by pesticides on U.S. agricultural lands.", "142 million", "67 million", "2.4 million", 1]
const trivQ7 = ["What are the 3 parts to sustainable agriculture?", "Environmental stewardship, society, policy", "Economy, society, policy", "Society, economy, environmental stewardship", 2]
const trivQ8 = ["What is a method to reduce the dependance for pesticides using sustainable agriculture?", "Plant hedgerows along field edges to encourage pest predators into the area", "Use homemade pesticides instead, such as borax, to reduce the presence of pests", "Place rubbish bins outside your home to deter pests", 0]
const trivQ9 = ["How can crop rotation improve soil fertility?", "Rotating plants at different angles everyday loosens the soil for nutrients", "Different plants draw from, and give back, different nutrients to the soil", "Crop rotation uses more water which can take nutrients from nearby bodies of water", 1]
const trivQ10 = ["Sustainable farming methods are also referred to as ________.", "Agroecology", "Agriplantation", "Aquaculture", 0]
const trivQ11 = ["What is “agroecology”?", "Farming techniques that balance the carbon output with carbon input", "Farming techniques that minimize the environmental impact of farming", "Farming techniques that maximize the economic output of farming", 1]
const trivQ12 = ["What does “agtech” refer to?", "Technology to study a plants biology and its impact on the environment", "Sustainable agriculture that increases the industry’s impact on the society through the environment", "Agricultural practices that are more efficient, safe, and less environmentally damaging than current agricultural methods", 2]
const trivQ13 = ["What does good stewardship of the natural systems and resources that farms rely on not include?", "Removing carbon sinks", "Managing water wisely", "Promoting biodiversity", 0]
const trivQ14 = ["What does an economically and socially sustainable agriculture system not support?", "Creating access to healthy food for all", "Promoting racial inequity and injustice", "Supporting the next generation of farmers", 1]
const trivQ15 = ["How do cover crops and perennial help in a farm?", "They cover and hide the crops from the excess interaction of UV rays from the sun", "They take in all the water and nutrients such that it creates an environment in which it is inhospitable for weeds to thrive in", "They protect and build soil health by preventing erosion, replenishing soil nutrients, and keeping weeds in check", 2]

function mainGame() {
  document.getElementById("endDay").style.display = "none"; 
  document.getElementById("mainGame").style.display = "block"; 
  document.getElementById("marketPlace").style.display = "none"; 
  document.getElementById("selectTools").style.display = "none"; 
  document.getElementById("currCoins").innerHTML = currCoins.toString();

  if (selection) {
    document.getElementById("selectTools").style.display = "block"; 
    for (var i=0; i<7; i++) {
      var elementId = "select" + i.toString() + "Img";
      if (plantsPlanted[i] != 0) {
        document.getElementById(elementId).src="assets/toolsSelection/emptySelection.png";
      }
      else {
        document.getElementById(elementId).src="assets/toolsSelection/transparentSelection.png";
      }
    }    
  }
}

function selecting(id) {
  // var pos;
  // if (id == 'select0') {
  //   pos = 0;
  // }
  // else if (id == 'select1') {
  //   pos = 1;
  // }
  // else if (id == 'select2') {
  //   pos = 2;
  // }
  // else if (id == 'select3') {
  //   pos = 3;
  // }
  // else if (id == 'select4') {
  //   pos = 4;
  // }
  // else if (id == 'select5') {
  //   pos = 5;
  // }
  // else if (id == 'select6') {
  //   pos = 6;
  // }
  
  if (document.getElementById(id+'Img').src=='assets/toolsSelection/emptySelection.png') {
    document.getElementById(id+'Img').src=toolSelectionImg;
    document.getElementById(id).className='errorMarketButtons';
  }
  else if (document.getElementById(id+'Img').src==toolSelectionImg) {
    document.getElementById(id+'Img').src='assets/toolsSelection/emptySelection.png';
    document.getElementById(id).className='mainButtons';    
  }
}

function instructions() {
  
}

function trivia() {
  document.getElementById("triviaPlace").style.display = "block";
  document.getElementById("mainGame").style.display = "none";

  var qIndex0 = "trivQ"+day.toString()+"[0]";
  var qIndex1 = "trivQ"+day.+"[1]";
  var qIndex2 = "trivQ"+day+"[2]";
  var qIndex3 = "trivQ"+day+"[3]";
  document.getElementById("triviaQuestion").innerHTML = qIndex0;
  document.getElementById("triviaAns0").innerHTML = qIndex1;
  document.getElementById("triviaAns1").innerHTML = qIndex2;
  document.getElementById("triviaAns2").innerHTML = qIndex3;

  localStorage.setItem("chosenAns", "");
}

function checkAns(id) {
  if (id == "triviaAns0") {
    document.getElementById(id).style.backgroundColor = "#EDBF9B";
    document.getElementById("triviaAns1").style.backgroundColor = "#FEFEE3";
    document.getElementById("triviaAns2").style.backgroundColor = "#FEFEE3";
  } else if (id == "triviaAns1") {
    document.getElementById(id).style.backgroundColor = "#EDBF9B";
    document.getElementById("triviaAns0").style.backgroundColor = "#FEFEE3";
    document.getElementById("triviaAns2").style.backgroundColor = "#FEFEE3";
  } else if (id == "triviaAns2") {
    document.getElementById(id).style.backgroundColor = "#EDBF9B";
    document.getElementById("triviaAns1").style.backgroundColor = "#FEFEE3";
    document.getElementById("triviaAns0").style.backgroundColor = "#FEFEE3";
  }
  localStorage.setItem("chosenAns", id);
}

function confirmAns(chosenAns) {
  var qIndex4 = "trivQ"+day+"[4]";
  if (chosenAns == "triviaAns0") {
    if (qIndex4 == 0) {
      console.log("correct");
    } 
    else {
      console.log("incorrect");
    }
  } 
  else if (chosenAns == "triviaAns1") {
    if (qIndex4 == 1) {
      console.log("correct");
    } 
    else {
      console.log("incorrect");
    }
  } 
  else if (chosenAns == "triviaAns2") {
    if (qIndex4 == 2) {
      console.log("correct");
    } 
    else {
      console.log("incorrect");
    }
  }
}

function market() {
  document.getElementById("marketPlace").style.display = "block"; 
  document.getElementById("mainGame").style.display = "none";  
  document.getElementById("marketTools").style.display = "none";  
  document.getElementById("marketPlants").style.display = "none";  
  document.getElementById("marketUpgrades").style.display = "none"; 
  document.getElementById("marketMarket").style.display = "block"; 
  document.getElementById("marketPlants2").style.display = "none"; 
  
  localStorage.setItem("infoLett", "false");
  localStorage.setItem("infoAsp", "false");
  localStorage.setItem("infoCorn", "false");
  localStorage.setItem("infoMush", "false");
  localStorage.setItem("infoStraw", "false");
  localStorage.setItem("infoPest", "false");
  localStorage.setItem("infoFert", "false");
  localStorage.setItem("infoWindbr", "false");
  localStorage.setItem("infoWindPow", "false");
}

function marketPlants() {  
  document.getElementById("marketTools").style.display = "none";  
  document.getElementById("marketPlants").style.display = "block";  
  document.getElementById("marketUpgrades").style.display = "none"; 
  document.getElementById("marketMarket").style.display = "none";  
  document.getElementById("marketPlants2").style.display = "none";    
}

function marketPlantsLettInfo() {
  if (localStorage.getItem("infoLett") == "false") {
  document.getElementById('marketPlantsLett').src='assets/cards/lettInfoCrd.png';   
  document.getElementById('marketPlantsLettImg').src='assets/buttons/backButt2.png';
  localStorage.setItem("infoLett", "true");
  }
  else {
    document.getElementById('marketPlantsLett').src='assets/cards/lettCrd.png';
  document.getElementById('marketPlantsLettImg').src='assets/buttons/iButt.png';
  localStorage.setItem("infoLett", "false");
  }
}

function marketPlantsAspInfo() {
  if (localStorage.getItem("infoAsp") == "false") {
  document.getElementById('marketPlantsAsp').src='assets/cards/aspInfoCrd.png'; document.getElementById('marketPlantsAspImg').src='assets/buttons/backButt2.png';
  localStorage.setItem("infoAsp", "true");
  }
  else {
    document.getElementById('marketPlantsAsp').src='assets/cards/aspCrd.png';
  document.getElementById('marketPlantsAspImg').src='assets/buttons/iButt.png';
  localStorage.setItem("infoAsp", "false");
  }
}

function marketPlantsCornInfo() {
  if (localStorage.getItem("infoCorn") == "false") {
  document.getElementById('marketPlantsCorn').src='assets/cards/cornInfoCrd.png'; document.getElementById('marketPlantsCornImg').src='assets/buttons/backButt2.png';
  localStorage.setItem("infoCorn", "true");
  }
  else {
    document.getElementById('marketPlantsCorn').src='assets/cards/cornCrd.png';
  document.getElementById('marketPlantsCornImg').src='assets/buttons/iButt.png';
  localStorage.setItem("infoCorn", "false");
  }
}

function marketPlantsMushInfo() {
  if (localStorage.getItem("infoMush") == "false") {
  document.getElementById('marketPlantsMush').src='assets/cards/mushInfoCrd.png'; document.getElementById('marketPlantsMushImg').src='assets/buttons/backButt2.png';
  localStorage.setItem("infoMush", "true");
  }
  else {
    document.getElementById('marketPlantsMush').src='assets/cards/mushCrd.png';
  document.getElementById('marketPlantsMushImg').src='assets/buttons/iButt.png';
  localStorage.setItem("infoMush", "false");
  }
}

function marketPlantsStrawInfo() {
  if (localStorage.getItem("infoStraw") == "false") {
  document.getElementById('marketPlantsStraw').src='assets/cards/strawInfoCrd.png'; document.getElementById('marketPlantsStrawImg').src='assets/buttons/backButt2.png';
  localStorage.setItem("infoStraw", "true");
  }
  else {
    document.getElementById('marketPlantsStraw').src='assets/cards/strawCrd.png';
  document.getElementById('marketPlantsStrawImg').src='assets/buttons/iButt.png';
  localStorage.setItem("infoStraw", "false");
  }
}

function marketPlants2() {
  document.getElementById("marketTools").style.display = "none";  
  document.getElementById("marketPlants").style.display = "none";   
  document.getElementById("marketPlants2").style.display = "block";  
  document.getElementById("marketUpgrades").style.display = "none"; 
  document.getElementById("marketMarket").style.display = "none"; 
  
}

function plantPurchase(id) {
  var price;
  var marketElementId;
  var marketPriceElementId;
  var cropImg;
  var priceImg;
  
  if (id == "marketPlantsLettPrice") {
    price = 14;
    cropImg = "lettImg.png";
    marketElementId = "marketPlantsLettPrice";
    marketPriceElementId = "marketPlantsLettPriceImg";
    priceImg = 'assets/prices/14Butt.png';
  }

  else if (id == "marketPlantsAspPrice") {
    price = 23;
    cropImg = "aspImg.png";
    marketElementId = "marketPlantsAspPrice";
    marketPriceElementId = "marketPlantsAspPriceImg";
    priceImg = 'assets/prices/23Butt.png';
  }

  else if (id == "marketPlantsCornPrice") {
    price = 42;
    cropImg = "cornImg.png";
    marketElementId = "marketPlantsCornPrice";
    marketPriceElementId = "marketPlantsCornPriceImg";
    priceImg = 'assets/prices/42Butt.png';
  }

  else if (id == "marketPlantsMushPrice") {
    price = 76;
    cropImg = "mushImg.png";
    marketElementId = "marketPlantsMushPrice";
    marketPriceElementId = "marketPlantsMushPriceImg";
    priceImg = 'assets/prices/76Butt.png';
  }

  else if (id == "marketPlantsStrawPrice") {
    price = 107;
    cropImg = "strawImg.png";
    marketElementId = "marketPlantsStrawPrice";
    marketPriceElementId = "marketPlantsStrawPriceImg";
    priceImg = 'assets/prices/107Butt.png';
  }
  
  for (var i=0; i<7; i++) {
    if (plantsPlanted[i] == 0) {
      if (currCoins >= price) {
        plantsPlanted[i] = cropImg;
        var cropElementId = "crop" + i.toString();
        document.getElementById(cropElementId).src='assets/crops/' + plantsPlanted[i]; 
        currCoins -= price;
        dailySpend += price;
        break;
      }
      else {
        document.getElementById(marketPriceElementId).src='assets/prices/noCoins.png';
        document.getElementById(marketElementId).className='errorMarketButtons';
        setTimeout(() => {
          document.getElementById(marketPriceElementId).src=priceImg;
          document.getElementById(marketElementId).className='mainButtons';
        }, 2000);
      }
    }
    else if (i == 6) {
      document.getElementById(marketPriceElementId).src='assets/prices/noSpace.png';
      document.getElementById(marketElementId).className='errorMarketButtons';
      setTimeout(() => {
        document.getElementById(marketPriceElementId).src=priceImg;
        document.getElementById(marketElementId).className='mainButtons';
      }, 2000);
    }
  }
  document.getElementById("currCoins").innerHTML = currCoins.toString();
}

function marketTools() {
  document.getElementById("marketTools").style.display = "block";  
  document.getElementById("marketPlants").style.display = "none";   
  document.getElementById("marketPlants2").style.display = "none";  
  document.getElementById("marketUpgrades").style.display = "none"; 
  document.getElementById("marketMarket").style.display = "none";   
}

function toolPurchase(id) {
  var price;
  var marketElementId;
  var marketPriceElementId;
  var priceImg;
  selection = true;

  if (id == "marketToolsPestPrice") {
    price = 54;
    marketElementId = "marketToolsPestPrice";
    marketPriceElementId = "marketToolsPestPriceImg";
    priceImg = "assets/prices/54Butt.png";
  }
  else if (id == "marketToolsFertPrice") {
    price = 133;
    marketElementId = "marketToolsFertPrice";
    marketPriceElementId = "marketToolsFertPriceImg";
    priceImg = "assets/prices/133Butt.png";
  }

  if (currCoins >= price) {
    currCoins -= price;
    dailySpend += price;
    if (id == "marketToolsPestPrice") {
      toolSelectionImg = "assets/toolsSelection/pestSelection.png";
      //70% CHANCE SELECTED PLANT DIES
      //30% CHANCE PLANT'S PROFIT IS DOUBLED
    } else if (id == "marketToolsFertPrice") {
      toolSelectionImg = "assets/toolsSelection/fertSelection.png";
      //RECEIVE 3x PROFIT FROM SELECTED PLANT
    }
    mainGame();
  }
  document.getElementById("currCoins").innerHTML = currCoins.toString();
}

function marketToolsPestInfo() {
  if (localStorage.getItem("infoPest") == "false") {
  document.getElementById('marketToolsPest').src='assets/cards/pestInfoCrd.png'; document.getElementById('marketToolsPestImg').src='assets/buttons/backButt2.png';
  localStorage.setItem("infoPest", "true");
  }
  else {
    document.getElementById('marketToolsPest').src='assets/cards/pestCrd.png';
  document.getElementById('marketToolsPestImg').src='assets/buttons/iButt.png';
  localStorage.setItem("infoPest", "false");
  }
}

function marketToolsFertInfo() {
  if (localStorage.getItem("infoFert") == "false") {
  document.getElementById('marketToolsFert').src='assets/cards/fertInfoCrd.png'; document.getElementById('marketToolsFertImg').src='assets/buttons/backButt2.png';
  localStorage.setItem("infoFert", "true");
  }
  else {
    document.getElementById('marketToolsFert').src='assets/cards/fertCrd.png';
  document.getElementById('marketToolsFertImg').src='assets/buttons/iButt.png';
  localStorage.setItem("infoFert", "false");
  }
}

function marketUpgrades() {
  document.getElementById("marketTools").style.display = "none"; 
  document.getElementById("marketPlants2").style.display = "none";   
  document.getElementById("marketPlants").style.display = "none";  
  document.getElementById("marketUpgrades").style.display = "block"; 
  document.getElementById("marketMarket").style.display = "none"; 
}

function upgradePurchase(id) {
  var price;
  var marketElementId;
  var marketPriceElementId;
  var priceImg;

  if (id == "marketUpgradesWindbrPrice") {
    price = 381;
    marketElementId = "marketUpgradesWindbrPrice";
    marketPriceElementId = "marketUpgradesWindbrPriceImg";
    priceImg = "assets/prices/381Butt.png";
  }
  else if (id == "marketUpgradesWindPowPrice") {
    price = 475;
    marketElementId = "marketUpgradesWindPowPrice";
    marketPriceElementId = "marketUpgradesWindPowPriceImg";
    priceImg = "assets/prices/475Butt.png";
  }

  if (currCoins >= price) {
    currCoins -= price;
    dailySpend += price;
    if (id == "marketUpgradesWindbrPrice") {
      //NO CROPS WILL DIE
    } else if (id == "marketUpgradesWindPowPrice") {
      //RECEIVE 50% MORE PROFIT FROM ALL CROPS
    }
    mainGame();
  }
}
function marketUpgradesWindbrInfo() {
  if (localStorage.getItem("infoWindbr") == "false") {
  document.getElementById('marketUpgradesWindbr').src='assets/cards/windbrInfoCrd.png'; document.getElementById('marketUpgradesWindbrImg').src='assets/buttons/backButt2.png';
  localStorage.setItem("infoWindbr", "true");
  }
  else {
    document.getElementById('marketUpgradesWindbr').src='assets/cards/windbrCrd.png';
  document.getElementById('marketUpgradesWindbrImg').src='assets/buttons/iButt.png';
  localStorage.setItem("infoWindbr", "false");
  }
}

function marketUpgradesWindPowInfo() {
  if (localStorage.getItem("infoWindPow") == "false") {
  document.getElementById('marketUpgradesWindPow').src='assets/cards/windPowInfoCrd.png'; document.getElementById('marketUpgradesWindPowImg').src='assets/buttons/backButt2.png';
  localStorage.setItem("infoWindPow", "true");
  }
  else {
    document.getElementById('marketUpgradesWindPow').src='assets/cards/windPowCrd.png';
  document.getElementById('marketUpgradesWindPowImg').src='assets/buttons/iButt.png';
  localStorage.setItem("infoWindPow", "false");
  }
}

function endDay() {
  document.getElementById("mainGame").style.display = "none"; 
  document.getElementById("endDay").style.display = "block";
}